.exit
.exit
/* Enable foreign keys: automatically check FK constraints */PRAGMA foreign_keys = ON;DROP TABLE Car;CREATE TABLE Car (name VARCHAR PRIMARY KEY,registration VARCHAR,capacity INT,topSpeed INT);
.table
PRAGMA foreign_keys = ON;
DROP TABLE Car;CREATE TABLE Car (name VARCHAR PRIMARY KEY,registration VARCHAR,capacity INT,topSpeed INT);
.table
CREATE TABLE Car (name VARCHAR PRIMARY KEY,registration VARCHAR,capacity INT,topSpeed INT);
.table
.schema
CREATE TABLE Agent (id INT PRIMARY KEY,lastName VARCHAR,registration VARCHAR,worksFor VARCHAR,FOREIGN KEY(registration) REFERENCES car(name));
.tables
.schema
/*The insertion code using foreign keys*/
INSERT INTO Car values ('AstonMartin', 'MI6', 2, 130);
INSERT INTO Agent values (007, 'Bond', 'AstonMartin', 'MI6');
.tables
select * from Car;
select * from Agents;
select * from Agent;
select * from Car;
select * from Agent;
INSERT INTO Agent values (0070, 'Bond', 'Buick', 'MI6');
select * car;
select * from car;
INSERT INTO Car values ('Buick', 'MI6', 5, 60);
select * from Car;
select * from Agent;
INSERT INTO Agent values (0070, 'Bond', 'Buick', 'MI6');
select * from Agent;
select * from Car;
INSERT INTO Agent values (0070, 'Bond', 'Buick', 'MI6');
INSERT INTO Agent values (1, 'Bond', 'Buick', 'MI6');
INSERT INTO Agent values (2, 'Bond', 'Buick', 'MI6');
INSERT INTO Agent values (3, 'Bond', 'Buick', 'MI6');
select * from Agent;
select * from Car;
INSERT INTO Agent values (3, 'Bond', 'BMW', 'MI6');
INSERT INTO Agent values (4, 'Bond', 'BMW', 'MI6');
.exit
pragma foreign_keys = on; /* must be turn on for FK to work*/
DROP TABLE Colours;
CREATE TABLE Colours (name string unique);
INSERT INTO Colours VALUES("red");
INSERT INTO Colours VALUES("green");
INSERT INTO Colours VALUES("blue");
INSERT INTO Colours VALUES("cyan");
.tables
select * from Colours;
INSERT INTO CarsFK VALUES("Subaru", "2018", "blue");
INSERT INTO CarsFK VALUES("Ford", "2017", "red");
INSERT INTO CarsFK VALUES("Chevy", "2019", "blue");
INSERT INTO CarsFK VALUES("Toyota", "2016", "green");
INSERT INTO CarsFK VALUES("Toyota", "2019", "Red");
DROP TABLE CarsFK;
CREATE TABLE CarsFK (model string, year integer, colour string references Colours(name));
INSERT INTO CarsFK VALUES("Subaru", "2018", "blue");
INSERT INTO CarsFK VALUES("Ford", "2017", "red");
INSERT INTO CarsFK VALUES("Chevy", "2019", "blue");
INSERT INTO CarsFK VALUES("Toyota", "2016", "green");
INSERT INTO CarsFK VALUES("Toyota", "2019", "Red");
select * from Colours;
INSERT INTO CarsFK VALUES("Toyota", "2019", "red");
INSERT INTO CarsFK VALUES("Toyota", "2016", "green");
INSERT INTO CarsFK VALUES("Toyota", "2016", "green");
INSERT INTO CarsFK VALUES("Toyota", "2016", "green");
INSERT INTO CarsFK VALUES("Toyota", "2016", "green");
INSERT INTO CarsFK VALUES("Toyota", "2016", "green");
select * from CarsFK;
INSERT INTO CarsFK VALUES("Toyota Sienna", "2001", "Chartreuse");
select * from Colours;
INSERT INTO Colours VALUES("Chartreuse");
select * from Colours;
INSERT INTO CarsFK VALUES("Toyota Sienna", "2001", "Chartreuse");
select * from CarsFK;
DROP TABLE CarsFK_ch;
CREATE TABLE CarsFK_ch (model string, year integer, colour string references Colours(name) on update cascade on delete cascade);
INSERT INTO CarsFK_ch VALUES("Subaru", "2018", "blue");
INSERT INTO CarsFK_ch VALUES("Ford", "2017", "red");
INSERT INTO CarsFK_ch VALUES("Chevy", "2019", "blue");
INSERT INTO CarsFK_ch VALUES("Toyota", "2019", "Red");
INSERT INTO CarsFK_ch VALUES("Toyota", "2016", "green");
INSERT INTO CarsFK_ch VALUES("BMW", "2018", "cyan");
INSERT INTO CarsFK_ch VALUES("Mercedes", "2018", "cyan");
INSERT INTO CarsFK_ch VALUES("Rolls-Royce", "2018", "cyan");
select * from CarsFK_ch;
.table
.exit
.tables
select * from CarsFK_ch;
.exit
